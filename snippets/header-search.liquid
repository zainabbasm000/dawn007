{% comment %}
  Renders a header search modal. Should be used with 'header.liquid'

  Accepts:
  - input_id: {String} Id for the search input element (required)

  Usage:
  {% render 'header-search', input_id: 'My-Id'%}
{% endcomment %}

<details-modal class="header__search z_header_search">
  <details>
    <summary class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle" aria-haspopup="dialog" aria-label="{{ 'general.search.search' | t }}">
      <span>
        <!-- <svg class="modal__toggle-open icon icon-search" aria-hidden="true" focusable="false">
          <use href="#icon-search">
        </svg> -->
            <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M32.8357 30.5215L22.2854 19.887C23.9226 17.7535 24.8082 15.145 24.8082 12.4015C24.8082 9.11733 23.5367 6.03795 21.2373 3.71613C18.938 1.39431 15.8748 0.116699 12.6208 0.116699C9.36675 0.116699 6.30364 1.39841 4.00427 3.71613C1.70084 6.03385 0.43335 9.11733 0.43335 12.4015C0.43335 15.6815 1.70491 18.769 4.00427 21.0868C6.30364 23.4086 9.36269 24.6862 12.6208 24.6862C15.3427 24.6862 17.9264 23.7935 20.043 22.1474L30.5932 32.7778C30.6242 32.809 30.6609 32.8337 30.7013 32.8506C30.7417 32.8675 30.7851 32.8762 30.8288 32.8762C30.8726 32.8762 30.9159 32.8675 30.9564 32.8506C30.9968 32.8337 31.0335 32.809 31.0645 32.7778L32.8357 30.9965C32.8667 30.9653 32.8912 30.9283 32.908 30.8875C32.9247 30.8468 32.9333 30.8031 32.9333 30.759C32.9333 30.7149 32.9247 30.6712 32.908 30.6304C32.8912 30.5897 32.8667 30.5526 32.8357 30.5215ZM19.0558 18.8878C17.3333 20.62 15.0502 21.5741 12.6208 21.5741C10.1914 21.5741 7.90832 20.62 6.18582 18.8878C4.46739 17.1516 3.52084 14.8502 3.52084 12.4015C3.52084 9.95269 4.46739 7.64725 6.18582 5.9151C7.90832 4.18295 10.1914 3.22884 12.6208 3.22884C15.0502 3.22884 17.3373 4.17886 19.0558 5.9151C20.7742 7.65135 21.7208 9.95269 21.7208 12.4015C21.7208 14.8502 20.7742 17.1557 19.0558 18.8878Z" fill="black"/>
    <use href="#icon-search">
</svg>
        <svg class="modal__toggle-close icon icon-close" aria-hidden="true" focusable="false">
          <use href="#icon-close">
        </svg>
      </span>
    </summary>
    <div class="search-modal modal__content gradient" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
      <div class="modal-overlay"></div>
      <div class="search-modal__content{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} search-modal__content-top{% else %} search-modal__content-bottom{% endif %}" tabindex="-1">
        {%- if settings.predictive_search_enabled -%}
          <predictive-search class="search-modal__form" data-loading-text="{{ 'accessibility.loading' | t }}">
        {%- else -%}
          <search-form class="search-modal__form">
        {%- endif -%}
            <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
              <div class="field">
                <input class="search__input field__input"
                  id="{{ input_id }}"
                  type="search"
                  name="q"
                  value="{{ search.terms | escape }}"
                  placeholder="{{ 'general.search.search' | t }}"
                  {%- if settings.predictive_search_enabled -%}
                    role="combobox"
                    aria-expanded="false"
                    aria-owns="predictive-search-results"
                    aria-controls="predictive-search-results"
                    aria-haspopup="listbox"
                    aria-autocomplete="list"
                    autocorrect="off"
                    autocomplete="off"
                    autocapitalize="off"
                    spellcheck="false"
                  {%- endif -%}
                >
                <label class="field__label" for="{{ input_id }}">{{ 'general.search.search' | t }}</label>
                <input type="hidden" name="options[prefix]" value="last">
                <button type="reset" class="reset__button field__button{% if search.terms == blank %} hidden{% endif %}" aria-label="{{ 'general.search.reset' | t }}">
                  <svg class="icon icon-close" aria-hidden="true" focusable="false">
                    <use xlink:href="#icon-reset">
                  </svg>
                </button>
                <button class="search__button field__button" aria-label="{{ 'general.search.search' | t }}">
                  <svg class="icon icon-search" aria-hidden="true" focusable="false">
                    <use href="#icon-search">
                  </svg>
                </button>
              </div>

              {%- if settings.predictive_search_enabled -%}
                <div class="predictive-search predictive-search--header" tabindex="-1" data-predictive-search>
                  <div class="predictive-search__loading-state">
                    <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                      <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                    </svg>
                  </div>
                </div>

                <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
              {%- endif -%}
            </form>
          {%- if settings.predictive_search_enabled -%}
            </predictive-search>
          {%- else -%}
            </search-form>
          {%- endif -%}
        <button type="button" class="search-modal__close-button modal__close-button link link--text focus-inset" aria-label="{{ 'accessibility.close' | t }}">
          <svg class="icon icon-close" aria-hidden="true" focusable="false">
            <use href="#icon-close">
          </svg>
        </button>
      </div>
    </div>
  </details>
</details-modal>
